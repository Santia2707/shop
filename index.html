<!DOCTYPE html>
<html lang="es">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  <title>Nova Shop</title>
Â  <style>
Â  Â  /* ----------- ESTILOS GENERALES ----------- */
Â  Â  body { 
Â  Â  Â  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
Â  Â  Â  margin:0; 
Â  Â  Â  background:#f4f6f9; 
Â  Â  Â  color:#333;
Â  Â  }
Â  Â  header { 
Â  Â  Â  background: linear-gradient(135deg, #2c3e50, #34495e);
Â  Â  Â  color:#fff; 
Â  Â  Â  padding:15px; 
Â  Â  Â  display:flex; 
Â  Â  Â  flex-wrap:wrap;
Â  Â  Â  justify-content:space-between; 
Â  Â  Â  align-items:center;
Â  Â  Â  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
Â  Â  }
Â  Â  header h1 { margin:0; font-size:1.8em; }
Â  Â  nav { display:flex; flex-wrap:wrap; gap:10px; }
Â  Â  nav button { 
Â  Â  Â  padding:10px 18px; 
Â  Â  Â  border:none; 
Â  Â  Â  border-radius:25px; 
Â  Â  Â  background:#3498db; 
Â  Â  Â  color:#fff; 
Â  Â  Â  cursor:pointer; 
Â  Â  Â  transition:0.3s;
Â  Â  Â  font-weight:bold;
Â  Â  }
Â  Â  nav button:hover { background:#2980b9; transform:scale(1.05); }

Â  Â  /* --- MenÃº de CategorÃ­as --- */
Â  Â  .category-menu {
Â  Â  Â  display: flex;
Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  justify-content: center;
Â  Â  Â  gap: 10px;
Â  Â  Â  margin-bottom: 20px;
Â  Â  }
Â  Â  .category-menu button {
Â  Â  Â  background: #5f27cd;
Â  Â  Â  color: white;
Â  Â  Â  border: none;
Â  Â  Â  padding: 10px 20px;
Â  Â  Â  border-radius: 25px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: 0.3s;
Â  Â  }
Â  Â  .category-menu button:hover, .category-menu button.active {
Â  Â  Â  background: #341f97;
Â  Â  }

Â  Â  .container { padding:20px; max-width:1200px; margin:auto; }
Â  Â  section { margin-bottom:30px; }

Â  Â  /* ----------- IMAGEN PRINCIPAL ----------- */
Â  Â  .hero-banner {
Â  Â  Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
Â  Â  Â  height: 300px;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  text-align: center;
Â  Â  Â  color: white;
Â  Â  Â  margin-bottom: 30px;
Â  Â  Â  border-radius: 15px;
Â  Â  Â  position: relative;
Â  Â  Â  overflow: hidden;
Â  Â  }
Â  Â  .hero-banner::before {
Â  Â  Â  content: 'ğŸª';
Â  Â  Â  position: absolute;
Â  Â  Â  top: 20px;
Â  Â  Â  left: 20px;
Â  Â  Â  font-size: 3em;
Â  Â  Â  opacity: 0.3;
Â  Â  }
Â  Â  .hero-content h2 {
Â  Â  Â  font-size: 2.5em;
Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
Â  Â  }
Â  Â  .hero-content p {
Â  Â  Â  font-size: 1.2em;
Â  Â  Â  text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
Â  Â  }

Â  Â  /* ----------- PRODUCTOS ----------- */
Â  Â  .products { 
Â  Â  Â  display:grid; 
Â  Â  Â  grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); 
Â  Â  Â  gap:20px; 
Â  Â  }
Â  Â  .product { 
Â  Â  Â  background:#fff; 
Â  Â  Â  border-radius:15px; 
Â  Â  Â  padding:15px; 
Â  Â  Â  box-shadow:0 4px 10px rgba(0,0,0,0.1); 
Â  Â  Â  text-align:center; 
Â  Â  Â  transition:0.3s;
Â  Â  }
Â  Â  .product:hover { transform:translateY(-5px); }
Â  Â  .product img { width:100%; height:180px; object-fit:cover; border-radius:10px; }
Â  Â  .product h4 { margin:10px 0; }
Â  Â  .product button { 
Â  Â  Â  background:#27ae60; 
Â  Â  Â  color:#fff; 
Â  Â  Â  border:none; 
Â  Â  Â  padding:10px 15px; 
Â  Â  Â  margin-top:10px; 
Â  Â  Â  cursor:pointer; 
Â  Â  Â  border-radius:8px; 
Â  Â  Â  transition:0.3s;
Â  Â  }
Â  Â  .product button:hover { background:#1e8449; transform:scale(1.05); }

Â  Â  /* ----------- TABLAS ----------- */
Â  Â  table { width:100%; border-collapse: collapse; background:#fff; border-radius:10px; overflow:hidden; }
Â  Â  th, td { padding:12px; border-bottom:1px solid #eee; text-align:center; font-size:0.95em; }
Â  Â  th { background:#3498db; color:#fff; }
Â  Â  .qtyBtn { 
Â  Â  Â  padding:5px 10px; 
Â  Â  Â  background:#3498db; 
Â  Â  Â  color:white; 
Â  Â  Â  border:none; 
Â  Â  Â  border-radius:5px; 
Â  Â  Â  cursor:pointer; 
Â  Â  Â  font-size:1em;
Â  Â  Â  margin:0 5px;
Â  Â  }
Â  Â  .qtyBtn:hover { background:#2980b9; }

Â  Â  /* ----------- FORMULARIOS ----------- */
Â  Â  form { 
Â  Â  Â  background:#fff; 
Â  Â  Â  padding:20px; 
Â  Â  Â  border-radius:15px; 
Â  Â  Â  box-shadow:0 4px 10px rgba(0,0,0,0.1); 
Â  Â  Â  max-width:450px; 
Â  Â  Â  margin:auto; 
Â  Â  }
Â  Â  form input, form select { 
Â  Â  Â  width:100%; 
Â  Â  Â  padding:12px; 
Â  Â  Â  margin-bottom:15px; 
Â  Â  Â  border:1px solid #ccc; 
Â  Â  Â  border-radius:8px; 
Â  Â  Â  font-size:1em; 
Â  Â  Â  box-sizing: border-box;
Â  Â  }
Â  Â  form button { 
Â  Â  Â  background:#27ae60; 
Â  Â  Â  color:#fff; 
Â  Â  Â  border:none; 
Â  Â  Â  padding:12px; 
Â  Â  Â  width:100%; 
Â  Â  Â  cursor:pointer; 
Â  Â  Â  border-radius:8px; 
Â  Â  Â  font-size:1em; 
Â  Â  Â  font-weight:bold; 
Â  Â  Â  transition:0.3s;
Â  Â  }
Â  Â  form button:hover { background:#1e8449; }

Â  Â  /* ----------- HISTORIAL ----------- */
Â  Â  .history-card {
Â  Â  Â  background:#fff; 
Â  Â  Â  padding:15px; 
Â  Â  Â  margin:15px 0; 
Â  Â  Â  border-radius:10px; 
Â  Â  Â  box-shadow:0 4px 10px rgba(0,0,0,0.1);
Â  Â  }
Â  Â  .history-card h4 { margin-top:0; }

Â  Â  /* ----------- HIDDEN CLASS ----------- */
Â  Â  .hidden { display: none !important; }

Â  Â  /* ----------- RESPONSIVE ----------- */
Â  Â  @media (max-width:600px) {
Â  Â  Â  header { flex-direction:column; text-align:center; }
Â  Â  Â  nav { justify-content:center; }
Â  Â  Â  .hero-content h2 { font-size: 2em; }
Â  Â  Â  .hero-content p { font-size: 1em; }
Â  Â  }
Â  </style>
</head>
<body>

Â  <header>
Â  Â  <h1>Nova Shop</h1>
Â  Â  <nav>
Â  Â  Â  <button onclick="showSection('products')">Productos</button>
Â  Â  Â  <button onclick="showSection('cart')">Carrito (<span id="cartCount">0</span>)</button>
Â  Â  Â  <button onclick="showSection('history')">Historial</button>
Â  Â  Â  <button onclick="showSection('auth')">Cuenta</button>
Â  Â  </nav>
Â  </header>

Â  <div class="container">
Â  Â  Â  Â  <section id="products">
Â  Â  Â  <div class="hero-banner">
Â  Â  Â  Â  <div class="hero-content">
Â  Â  Â  Â  Â  <h2>ğŸ›ï¸ Bienvenido a Nova Shop</h2>
Â  Â  Â  Â  Â  <p>Descubre la mejor selecciÃ³n de productos con estilo Ãºnico</p>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  Â  <h2>Nuestros Productos</h2>

Â  Â  Â  Â  Â  Â  <div class="category-menu">
Â  Â  Â  Â  <button onclick="showProductsByCategory('all')" class="active">Todos</button>
Â  Â  Â  Â  <button onclick="showProductsByCategory('moda')">Moda</button>
Â  Â  Â  Â  <button onclick="showProductsByCategory('tecnologia')">TecnologÃ­a</button>
Â  Â  Â  Â  <button onclick="showProductsByCategory('hogar')">Hogar</button>
Â  Â  Â  Â  <button onclick="showProductsByCategory('deportes')">Deportes</button>
Â  Â  Â  </div>

Â  Â  Â  <div class="products" id="productList"></div>
Â  Â  </section>

Â  Â  Â  Â  <section id="cart" style="display:none;">
Â  Â  Â  <h2>ğŸ›’ Carrito</h2>
Â  Â  Â  <table>
Â  Â  Â  Â  <thead>
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th>Producto</th>
Â  Â  Â  Â  Â  Â  <th>Precio</th>
Â  Â  Â  Â  Â  Â  <th>Cantidad</th>
Â  Â  Â  Â  Â  Â  <th>Subtotal</th>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  </thead>
Â  Â  Â  Â  <tbody id="cartItems"></tbody>
Â  Â  Â  </table>
Â  Â  Â  <h3>Total: $<span id="cartTotal">0</span></h3>
Â  Â  Â  <button onclick="checkout()" id="checkoutBtn">Finalizar Compra</button>
Â  Â  </section>

Â  Â  Â  Â  <section id="checkout" style="display:none;">
Â  Â  Â  <h2>ğŸ’³ Finalizar Compra</h2>
Â  Â  Â  <form id="paymentForm">
Â  Â  Â  Â  <label for="paymentMethod">MÃ©todo de Pago</label>
Â  Â  Â  Â  <select id="paymentMethod" required onchange="togglePaymentFields()">
Â  Â  Â  Â  Â  <option value="">Seleccione...</option>
Â  Â  Â  Â  Â  <option value="card">Tarjeta de CrÃ©dito/DÃ©bito</option>
Â  Â  Â  Â  Â  <option value="paypal">PayPal</option>
Â  Â  Â  Â  </select>

Â  Â  Â  Â  <div id="cardFields" class="hidden">
Â  Â  Â  Â  Â  <input type="text" placeholder="NÃºmero de tarjeta" maxlength="16">
Â  Â  Â  Â  Â  <input type="text" placeholder="MM/AA">
Â  Â  Â  Â  Â  <input type="text" placeholder="CVV" maxlength="3">
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="paypalFields" class="hidden">
Â  Â  Â  Â  Â  <input type="email" placeholder="Correo PayPal">
Â  Â  Â  Â  Â  <input type="password" placeholder="ContraseÃ±a PayPal">
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <button type="submit">Confirmar Pago</button>
Â  Â  Â  </form>
Â  Â  </section>

Â  Â  Â  Â  <section id="history" style="display:none;">
Â  Â  Â  <h2>ğŸ“œ Historial de Compras</h2>
Â  Â  Â  <div id="historyList"></div>
Â  Â  </section>

Â  Â  Â  Â  <section id="auth" style="display:none;">
Â  Â  Â  <h2>ğŸ” Acceso a tu cuenta</h2>
Â  Â  Â  <div id="authForms">
Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  <h3>Crear Cuenta</h3>
Â  Â  Â  Â  Â  <input type="text" id="registerUser" placeholder="Usuario">
Â  Â  Â  Â  Â  <input type="password" id="registerPass" placeholder="ContraseÃ±a">
Â  Â  Â  Â  Â  <button onclick="register()">Registrarse</button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <br>
Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  <h3>Iniciar SesiÃ³n</h3>
Â  Â  Â  Â  Â  <input type="text" id="loginUser" placeholder="Usuario">
Â  Â  Â  Â  Â  <input type="password" id="loginPass" placeholder="ContraseÃ±a">
Â  Â  Â  Â  Â  <button onclick="login()">Ingresar</button>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  Â  <div id="welcome" class="hidden">
Â  Â  Â  Â  <h3>Bienvenido, <span id="userName"></span> ğŸ‰</h3>
Â  Â  Â  Â  <button onclick="logout()">Cerrar SesiÃ³n</button>
Â  Â  Â  </div>
Â  Â  </section>
Â  </div>

Â  <script>
Â  Â  const products = [
Â  Â  Â  // Ropa y Moda
Â  Â  Â  {id:1, category:"moda", name:"Camisa Nova", price:25, img:"https://assets.myntassets.com/dpr_1.5,q_60,w_400,c_limit,fl_progressive/assets/images/15858052/2021/10/26/1f31f9ab-6a7f-4318-971c-3331b262de631635233156942-Roadster-Men-Shirts-831635233156386-1.jpg"},
Â  Â  Â  {id:2, category:"moda", name:"PantalÃ³n Moderno", price:40, img:"https://m.media-amazon.com/images/I/71I3P6x-JXL._AC_UY1100_.jpg"},
Â  Â  Â  {id:3, category:"moda", name:"Zapatos Trend", price:60, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR07wJb2WpDqG4t62wJ4tS6D5U-lH6n_3kY3Q&s"},
Â  Â  Â  {id:4, category:"moda", name:"Mochila Casual", price:30, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR45q-jP0zM-zJg10s7V0k8dKqL6j5G_g3P5w&s"},
Â  Â  Â  {id:5, category:"moda", name:"Chaqueta Deportiva", price:55, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTLg_pG-6VpP4P4YkF7J4n_m_3N8G_9n_b86g&s"},
Â  Â  Â  {id:6, category:"moda", name:"Vestido Elegante", price:45, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTOj6V1p1p22-i7-9M7o4S5e2hGj_8zJ5D87g&s"},
Â  Â  Â  {id:7, category:"moda", name:"Gorra Urbana", price:15, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR_x_2WpG_q_5Vp4E_lD_9q-7c-8k_7H_9G_7Q&s"},
Â  Â  Â  {id:8, category:"moda", name:"Reloj ClÃ¡sico", price:80, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT7wJb2WpDqG4t62wJ4tS6D5U-lH6n_3kY3Q&s"},
Â  Â  Â  
Â  Â  Â  // TecnologÃ­a
Â  Â  Â  {id:9, category:"tecnologia", name:"Auriculares Bluetooth", price:35, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ_p-z_wL_4zF6g_8n_9X_g8_5c_2p_g3p_6g&s"},
Â  Â  Â  {id:10, category:"tecnologia", name:"Smartphone Pro", price:299, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSSmJ0h_0B_0A4a_8P_0A4a_0A_8P_0A4a_0A&s"},
Â  Â  Â  {id:11, category:"tecnologia", name:"Tablet Ultra", price:199, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT0p-p_2q_2h_2P_2p_2p_2p_2p_2p_2p&s"},
Â  Â  Â  {id:12, category:"tecnologia", name:"Cargador PortÃ¡til", price:20, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ_q_5VpG_q_5VpG_q_5VpG_q_5VpG_q_5VpG&s"},
Â  Â  Â  {id:13, category:"tecnologia", name:"Smartwatch", price:150, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTRy3d4gX_2T3d3c8c_3d3c8c_3d3c8c_3d3c8c&s"},
Â  Â  Â  {id:14, category:"tecnologia", name:"Teclado MecÃ¡nico", price:85, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRz-4cQ_b7b_7c_3d3c8c_3d3c8c_3d3c8c_3d3c8c&s"},
Â  Â  Â  {id:15, category:"tecnologia", name:"Mouse InalÃ¡mbrico", price:30, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT7wJb2WpDqG4t62wJ4tS6D5U-lH6n_3kY3Q&s"},
Â  Â  Â  {id:16, category:"tecnologia", name:"Webcam Full HD", price:45, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR_x_2WpG_q_5Vp4E_lD_9q-7c-8k_7H_9G_7Q&s"},
Â  Â  Â  
Â  Â  Â  // Casa y DecoraciÃ³n
Â  Â  Â  {id:17, category:"hogar", name:"LÃ¡mpara LED", price:25, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR_x_2WpG_q_5Vp4E_lD_9q-7c-8k_7H_9G_7Q&s"},
Â  Â  Â  {id:18, category:"hogar", name:"CojÃ­n Decorativo", price:12, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ_q_5VpG_q_5VpG_q_5VpG_q_5VpG_q_5VpG&s"},
Â  Â  Â  {id:19, category:"hogar", name:"Vela AromÃ¡tica", price:8, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR07wJb2WpDqG4t62wJ4tS6D5U-lH6n_3kY3Q&s"},
Â  Â  Â  {id:20, category:"hogar", name:"Set de Tazas", price:18, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRz-4cQ_b7b_7c_3d3c8c_3d3c8c_3d3c8c_3d3c8c&s"},
Â  Â  Â  {id:21, category:"hogar", name:"Alfombra Moderna", price:65, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT7wJb2WpDqG4t62wJ4tS6D5U-lH6n_3kY3Q&s"},
Â  Â  Â  
Â  Â  Â  // Deportes y Fitness
Â  Â  Â  {id:22, category:"deportes", name:"Botella TÃ©rmica", price:18, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT0p-p_2q_2h_2P_2p_2p_2p_2p_2p_2p&s"},
Â  Â  Â  {id:23, category:"deportes", name:"Esterilla Yoga", price:22, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSSmJ0h_0B_0A4a_8P_0A4a_0A_8P_0A4a_0A&s"},
Â  Â  Â  {id:24, category:"deportes", name:"Bandas ElÃ¡sticas", price:15, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ_p-z_wL_4zF6g_8n_9X_g8_5c_2p_g3p_6g&s"},
Â  Â  Â  {id:25, category:"deportes", name:"Gafas de Sol", price:28, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT7wJb2WpDqG4t62wJ4tS6D5U-lH6n_3kY3Q&s"},
Â  Â  Â  {id:26, category:"deportes", name:"Cuerda para Saltar", price:10, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR_x_2WpG_q_5Vp4E_lD_9q-7c-8k_7H_9G_7Q&s"}
Â  Â  ];

Â  Â  let users = {};
Â  Â  let currentUser = null;

Â  Â  const productList = document.getElementById("productList");

Â  Â  function renderProducts(productsToRender) {
Â  Â  Â  productList.innerHTML = "";
Â  Â  Â  productsToRender.forEach(p => {
Â  Â  Â  Â  const div = document.createElement("div");
Â  Â  Â  Â  div.className = "product";
Â  Â  Â  Â  div.innerHTML = `
Â  Â  Â  Â  Â  <img src="${p.img}" alt="${p.name}">
Â  Â  Â  Â  Â  <h4>${p.name}</h4>
Â  Â  Â  Â  Â  <p>$${p.price}</p>
Â  Â  Â  Â  Â  <button onclick="addToCart(${p.id})">Agregar al Carrito</button>
Â  Â  Â  Â  `;
Â  Â  Â  Â  productList.appendChild(div);
Â  Â  Â  });
Â  Â  }

Â  Â  function showProductsByCategory(category) {
Â  Â  Â  document.querySelectorAll('.category-menu button').forEach(btn => {
Â  Â  Â  Â  btn.classList.remove('active');
Â  Â  Â  });
Â  Â  Â  const clickedButton = event.target;
Â  Â  Â  clickedButton.classList.add('active');

Â  Â  Â  if (category === 'all') {
Â  Â  Â  Â  renderProducts(products);
Â  Â  Â  } else {
Â  Â  Â  Â  const filteredProducts = products.filter(p => p.category === category);
Â  Â  Â  Â  renderProducts(filteredProducts);
Â  Â  Â  }
Â  Â  }

Â  Â  // Carga inicial de todos los productos
Â  Â  renderProducts(products);

Â  Â  function getCart(){
Â  Â  Â  return currentUser && users[currentUser]?.cart ? users[currentUser].cart : [];
Â  Â  }
Â  Â  function saveCart(cart){
Â  Â  Â  if(currentUser){
Â  Â  Â  Â  users[currentUser].cart = cart;
Â  Â  Â  }
Â  Â  }

Â  Â  function showSection(id){
Â  Â  Â  document.querySelectorAll("section").forEach(s=>s.style.display="none");
Â  Â  Â  document.getElementById(id).style.display="block";
Â  Â  Â  if(id==="cart") renderCart();
Â  Â  Â  if(id==="auth") updateAuthView();
Â  Â  Â  if(id==="history") renderHistory();
Â  Â  Â  if(id==="products") showProductsByCategory('all');
Â  Â  }

Â  Â  function addToCart(id){
Â  Â  Â  if(!currentUser){ alert("Debes iniciar sesiÃ³n para agregar al carrito."); return; }
Â  Â  Â  let cart = getCart();
Â  Â  Â  const product = products.find(p=>p.id===id);
Â  Â  Â  const found = cart.find(item=>item.id===id);
Â  Â  Â  if(found){ found.qty++; } else { cart.push({...product, qty:1}); }
Â  Â  Â  saveCart(cart);
Â  Â  Â  updateCartCount();
Â  Â  }

Â  Â  function renderCart(){
Â  Â  Â  let cart = getCart();
Â  Â  Â  const cartItems = document.getElementById("cartItems");
Â  Â  Â  cartItems.innerHTML = "";
Â  Â  Â  let total = 0;
Â  Â  Â  cart.forEach(item=>{
Â  Â  Â  Â  const subtotal = item.price * item.qty;
Â  Â  Â  Â  total += subtotal;
Â  Â  Â  Â  cartItems.innerHTML += `
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <td>${item.name}</td>
Â  Â  Â  Â  Â  Â  <td>$${item.price}</td>
Â  Â  Â  Â  Â  Â  <td>
Â  Â  Â  Â  Â  Â  Â  <button class="qtyBtn" onclick="changeQty(${item.id}, -1)">-</button>
Â  Â  Â  Â  Â  Â  Â  ${item.qty}
Â  Â  Â  Â  Â  Â  Â  <button class="qtyBtn" onclick="changeQty(${item.id}, 1)">+</button>
Â  Â  Â  Â  Â  Â  </td>
Â  Â  Â  Â  Â  Â  <td>$${subtotal}</td>
Â  Â  Â  Â  Â  </tr>`;
Â  Â  Â  });
Â  Â  Â  document.getElementById("cartTotal").textContent = total;
Â  Â  }

Â  Â  function changeQty(id, delta){
Â  Â  Â  let cart = getCart();
Â  Â  Â  const item = cart.find(p=>p.id===id);
Â  Â  Â  if(item){
Â  Â  Â  Â  item.qty += delta;
Â  Â  Â  Â  if(item.qty<=0) cart = cart.filter(p=>p.id!==id);
Â  Â  Â  Â  saveCart(cart);
Â  Â  Â  Â  renderCart();
Â  Â  Â  Â  updateCartCount();
Â  Â  Â  }
Â  Â  }

Â  Â  function updateCartCount(){
Â  Â  Â  let cart = getCart();
Â  Â  Â  let count = cart.reduce((sum,p)=>sum+p.qty,0);
Â  Â  Â  document.getElementById("cartCount").textContent = count;
Â  Â  }
Â  Â  updateCartCount();

Â  Â  function checkout(){
Â  Â  Â  let cart = getCart();
Â  Â  Â  if(cart.length===0){ alert("Tu carrito estÃ¡ vacÃ­o"); return; }
Â  Â  Â  showSection('checkout');
Â  Â  }

Â  Â  function togglePaymentFields(){
Â  Â  Â  const method = document.getElementById("paymentMethod").value;
Â  Â  Â  document.getElementById("cardFields").classList.add("hidden");
Â  Â  Â  document.getElementById("paypalFields").classList.add("hidden");
Â  Â  Â  if(method==="card") document.getElementById("cardFields").classList.remove("hidden");
Â  Â  Â  if(method==="paypal") document.getElementById("paypalFields").classList.remove("hidden");
Â  Â  }

Â  Â  document.getElementById("paymentForm").addEventListener("submit", function(e){
Â  Â  Â  e.preventDefault();
Â  Â  Â  const cart = getCart();
Â  Â  Â  const total = cart.reduce((sum,p)=>sum+(p.price*p.qty),0);
Â  Â  Â  const date = new Date().toLocaleString();
Â  Â  Â  if(currentUser){
Â  Â  Â  Â  if(!users[currentUser].history) users[currentUser].history = [];
Â  Â  Â  Â  users[currentUser].history.push({date, cart, total});
Â  Â  Â  Â  saveCart([]); 
Â  Â  Â  }
Â  Â  Â  alert("âœ… Pago realizado con Ã©xito. Â¡Gracias por tu compra!");
Â  Â  Â  updateCartCount();
Â  Â  Â  showSection('history');
Â  Â  });

Â  Â  function renderHistory(){
Â  Â  Â  const historyList = document.getElementById("historyList");
Â  Â  Â  historyList.innerHTML = "";
Â  Â  Â  if(!currentUser || !users[currentUser]?.history || users[currentUser].history.length===0){
Â  Â  Â  Â  historyList.innerHTML = "<p>No tienes compras realizadas aÃºn.</p>";
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  users[currentUser].history.forEach(order=>{
Â  Â  Â  Â  historyList.innerHTML += `
Â  Â  Â  Â  Â  <div class="history-card">
Â  Â  Â  Â  Â  Â  <h4>Compra del ${order.date}</h4>
Â  Â  Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  Â  Â  ${order.cart.map(item=>`<li>${item.qty} x ${item.name} - $${item.price*item.qty}</li>`).join("")}
Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  <strong>Total: $${order.total}</strong>
Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  });
Â  Â  }

Â  Â  function register(){
Â  Â  Â  const user = document.getElementById("registerUser").value;
Â  Â  Â  const pass = document.getElementById("registerPass").value;
Â  Â  Â  if(users[user]){ alert("El usuario ya existe"); return; }
Â  Â  Â  users[user] = {password: pass, cart: [], history: []};
Â  Â  Â  alert("Cuenta creada. Ahora inicia sesiÃ³n.");
Â  Â  }

Â  Â  function login(){
Â  Â  Â  const user = document.getElementById("loginUser").value;
Â  Â  Â  const pass = document.getElementById("loginPass").value;
Â  Â  Â  if(users[user] && users[user].password===pass){
Â  Â  Â  Â  currentUser = user;
Â  Â  Â  Â  updateAuthView();
Â  Â  Â  Â  updateCartCount();
Â  Â  Â  } else { alert("Datos incorrectos"); }
Â  Â  }

Â  Â  function logout(){
Â  Â  Â  currentUser = null;
Â  Â  Â  updateAuthView();
Â  Â  Â  updateCartCount();
Â  Â  }

Â  Â  function updateAuthView(){
Â  Â  Â  if(currentUser){
Â  Â  Â  Â  document.getElementById("authForms").classList.add("hidden");
Â  Â  Â  Â  document.getElementById("welcome").classList.remove("hidden");
Â  Â  Â  Â  document.getElementById("userName").textContent = currentUser;
Â  Â  Â  } else {
Â  Â  Â  Â  document.getElementById("authForms").classList.remove("hidden");
Â  Â  Â  Â  document.getElementById("welcome").classList.add("hidden");
Â  Â  Â  }
Â  Â  }
Â  </script>
</body>
</html>