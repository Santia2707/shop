<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nova Shop</title>
  <style>
    /* ----------- ESTILOS GENERALES ----------- */
    body { 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
      margin:0; 
      background:#f4f6f9; 
      color:#333;
    }
    header { 
      background: linear-gradient(135deg, #2c3e50, #34495e);
      color:#fff; 
      padding:15px; 
      display:flex; 
      flex-wrap:wrap;
      justify-content:space-between; 
      align-items:center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    header h1 { margin:0; font-size:1.8em; }
    nav { display:flex; flex-wrap:wrap; gap:10px; }
    nav button { 
      padding:10px 18px; 
      border:none; 
      border-radius:25px; 
      background:#3498db; 
      color:#fff; 
      cursor:pointer; 
      transition:0.3s;
      font-weight:bold;
    }
    nav button:hover { background:#2980b9; transform:scale(1.05); }

    /* --- Menú de Categorías --- */
    .category-menu {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    .category-menu button {
      background: #5f27cd;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 25px;
      cursor: pointer;
      transition: 0.3s;
    }
    .category-menu button:hover, .category-menu button.active {
      background: #341f97;
    }

    .container { padding:20px; max-width:1200px; margin:auto; }
    section { margin-bottom:30px; }

    /* ----------- IMAGEN PRINCIPAL ----------- */
    .hero-banner {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      height: 300px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: white;
      margin-bottom: 30px;
      border-radius: 15px;
      position: relative;
      overflow: hidden;
    }
    .hero-banner::before {
      content: '🏪';
      position: absolute;
      top: 20px;
      left: 20px;
      font-size: 3em;
      opacity: 0.3;
    }
    .hero-content h2 {
      font-size: 2.5em;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
    }
    .hero-content p {
      font-size: 1.2em;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
    }

    /* ----------- PRODUCTOS ----------- */
    .products { 
      display:grid; 
      grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); 
      gap:20px; 
    }
    .product { 
      background:#fff; 
      border-radius:15px; 
      padding:15px; 
      box-shadow:0 4px 10px rgba(0,0,0,0.1); 
      text-align:center; 
      transition:0.3s;
    }
    .product:hover { transform:translateY(-5px); }
    .product img { width:100%; height:180px; object-fit:cover; border-radius:10px; }
    .product h4 { margin:10px 0; }
    .product button { 
      background:#27ae60; 
      color:#fff; 
      border:none; 
      padding:10px 15px; 
      margin-top:10px; 
      cursor:pointer; 
      border-radius:8px; 
      transition:0.3s;
    }
    .product button:hover { background:#1e8449; transform:scale(1.05); }

    /* ----------- TABLAS ----------- */
    table { width:100%; border-collapse: collapse; background:#fff; border-radius:10px; overflow:hidden; }
    th, td { padding:12px; border-bottom:1px solid #eee; text-align:center; font-size:0.95em; }
    th { background:#3498db; color:#fff; }
    .qtyBtn { 
      padding:5px 10px; 
      background:#3498db; 
      color:white; 
      border:none; 
      border-radius:5px; 
      cursor:pointer; 
      font-size:1em;
      margin:0 5px;
    }
    .qtyBtn:hover { background:#2980b9; }

    /* ----------- FORMULARIOS ----------- */
    form { 
      background:#fff; 
      padding:20px; 
      border-radius:15px; 
      box-shadow:0 4px 10px rgba(0,0,0,0.1); 
      max-width:450px; 
      margin:auto; 
    }
    form input, form select { 
      width:100%; 
      padding:12px; 
      margin-bottom:15px; 
      border:1px solid #ccc; 
      border-radius:8px; 
      font-size:1em; 
      box-sizing: border-box;
    }
    form button { 
      background:#27ae60; 
      color:#fff; 
      border:none; 
      padding:12px; 
      width:100%; 
      cursor:pointer; 
      border-radius:8px; 
      font-size:1em; 
      font-weight:bold; 
      transition:0.3s;
    }
    form button:hover { background:#1e8449; }

    /* ----------- HISTORIAL ----------- */
    .history-card {
      background:#fff; 
      padding:15px; 
      margin:15px 0; 
      border-radius:10px; 
      box-shadow:0 4px 10px rgba(0,0,0,0.1);
    }
    .history-card h4 { margin-top:0; }

    /* ----------- HIDDEN CLASS ----------- */
    .hidden { display: none !important; }

    /* ----------- RESPONSIVE ----------- */
    @media (max-width:600px) {
      header { flex-direction:column; text-align:center; }
      nav { justify-content:center; }
      .hero-content h2 { font-size: 2em; }
      .hero-content p { font-size: 1em; }
    }
  </style>
</head>
<body>

  <header>
    <h1>Nova Shop</h1>
    <nav>
      <button onclick="showSection('products')">Productos</button>
      <button onclick="showSection('cart')">Carrito (<span id="cartCount">0</span>)</button>
      <button onclick="showSection('history')">Historial</button>
      <button onclick="showSection('auth')">Cuenta</button>
    </nav>
  </header>

  <div class="container">
        <section id="products">
      <div class="hero-banner">
        <div class="hero-content">
          <h2>🛍️ Bienvenido a Nova Shop</h2>
          <p>Descubre la mejor selección de productos con estilo único</p>
        </div>
      </div>
      <h2>Nuestros Productos</h2>

            <div class="category-menu">
        <button onclick="showProductsByCategory('all')" class="active">Todos</button>
        <button onclick="showProductsByCategory('moda')">Moda</button>
        <button onclick="showProductsByCategory('tecnologia')">Tecnología</button>
        <button onclick="showProductsByCategory('hogar')">Hogar</button>
        <button onclick="showProductsByCategory('deportes')">Deportes</button>
      </div>

      <div class="products" id="productList"></div>
    </section>

        <section id="cart" style="display:none;">
      <h2>🛒 Carrito</h2>
      <table>
        <thead>
          <tr>
            <th>Producto</th>
            <th>Precio</th>
            <th>Cantidad</th>
            <th>Subtotal</th>
          </tr>
        </thead>
        <tbody id="cartItems"></tbody>
      </table>
      <h3>Total: $<span id="cartTotal">0</span></h3>
      <button onclick="checkout()" id="checkoutBtn">Finalizar Compra</button>
    </section>

        <section id="checkout" style="display:none;">
      <h2>💳 Finalizar Compra</h2>
      <form id="paymentForm">
        <label for="paymentMethod">Método de Pago</label>
        <select id="paymentMethod" required onchange="togglePaymentFields()">
          <option value="">Seleccione...</option>
          <option value="card">Tarjeta de Crédito/Débito</option>
          <option value="paypal">PayPal</option>
        </select>

        <div id="cardFields" class="hidden">
          <input type="text" placeholder="Número de tarjeta" maxlength="16">
          <input type="text" placeholder="MM/AA">
          <input type="text" placeholder="CVV" maxlength="3">
        </div>

        <div id="paypalFields" class="hidden">
          <input type="email" placeholder="Correo PayPal">
          <input type="password" placeholder="Contraseña PayPal">
        </div>

        <button type="submit">Confirmar Pago</button>
      </form>
    </section>

        <section id="history" style="display:none;">
      <h2>📜 Historial de Compras</h2>
      <div id="historyList"></div>
    </section>

        <section id="auth" style="display:none;">
      <h2>🔐 Acceso a tu cuenta</h2>
      <div id="authForms">
        <div>
          <h3>Crear Cuenta</h3>
          <input type="text" id="registerUser" placeholder="Usuario">
          <input type="password" id="registerPass" placeholder="Contraseña">
          <button onclick="register()">Registrarse</button>
        </div>
        <br>
        <div>
          <h3>Iniciar Sesión</h3>
          <input type="text" id="loginUser" placeholder="Usuario">
          <input type="password" id="loginPass" placeholder="Contraseña">
          <button onclick="login()">Ingresar</button>
        </div>
      </div>
      <div id="welcome" class="hidden">
        <h3>Bienvenido, <span id="userName"></span> 🎉</h3>
        <button onclick="logout()">Cerrar Sesión</button>
      </div>
    </section>
  </div>

  <script>
    const products = [
      // Ropa y Moda
      {id:1, category:"moda", name:"Camisa Nova", price:25, img:"https://assets.myntassets.com/dpr_1.5,q_60,w_400,c_limit,fl_progressive/assets/images/15858052/2021/10/26/1f31f9ab-6a7f-4318-971c-3331b262de631635233156942-Roadster-Men-Shirts-831635233156386-1.jpg"},
      {id:2, category:"moda", name:"Pantalón Moderno", price:40, img:"https://m.media-amazon.com/images/I/71I3P6x-JXL._AC_UY1100_.jpg"},
      {id:3, category:"moda", name:"Zapatos Trend", price:60, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR07wJb2WpDqG4t62wJ4tS6D5U-lH6n_3kY3Q&s"},
      {id:4, category:"moda", name:"Mochila Casual", price:30, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR45q-jP0zM-zJg10s7V0k8dKqL6j5G_g3P5w&s"},
      {id:5, category:"moda", name:"Chaqueta Deportiva", price:55, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTLg_pG-6VpP4P4YkF7J4n_m_3N8G_9n_b86g&s"},
      {id:6, category:"moda", name:"Vestido Elegante", price:45, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTOj6V1p1p22-i7-9M7o4S5e2hGj_8zJ5D87g&s"},
      {id:7, category:"moda", name:"Gorra Urbana", price:15, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR_x_2WpG_q_5Vp4E_lD_9q-7c-8k_7H_9G_7Q&s"},
      {id:8, category:"moda", name:"Reloj Clásico", price:80, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT7wJb2WpDqG4t62wJ4tS6D5U-lH6n_3kY3Q&s"},
      
      // Tecnología
      {id:9, category:"tecnologia", name:"Auriculares Bluetooth", price:35, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ_p-z_wL_4zF6g_8n_9X_g8_5c_2p_g3p_6g&s"},
      {id:10, category:"tecnologia", name:"Smartphone Pro", price:299, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSSmJ0h_0B_0A4a_8P_0A4a_0A_8P_0A4a_0A&s"},
      {id:11, category:"tecnologia", name:"Tablet Ultra", price:199, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT0p-p_2q_2h_2P_2p_2p_2p_2p_2p_2p&s"},
      {id:12, category:"tecnologia", name:"Cargador Portátil", price:20, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ_q_5VpG_q_5VpG_q_5VpG_q_5VpG_q_5VpG&s"},
      {id:13, category:"tecnologia", name:"Smartwatch", price:150, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTRy3d4gX_2T3d3c8c_3d3c8c_3d3c8c_3d3c8c&s"},
      {id:14, category:"tecnologia", name:"Teclado Mecánico", price:85, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRz-4cQ_b7b_7c_3d3c8c_3d3c8c_3d3c8c_3d3c8c&s"},
      {id:15, category:"tecnologia", name:"Mouse Inalámbrico", price:30, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT7wJb2WpDqG4t62wJ4tS6D5U-lH6n_3kY3Q&s"},
      {id:16, category:"tecnologia", name:"Webcam Full HD", price:45, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR_x_2WpG_q_5Vp4E_lD_9q-7c-8k_7H_9G_7Q&s"},
      
      // Casa y Decoración
      {id:17, category:"hogar", name:"Lámpara LED", price:25, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR_x_2WpG_q_5Vp4E_lD_9q-7c-8k_7H_9G_7Q&s"},
      {id:18, category:"hogar", name:"Cojín Decorativo", price:12, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ_q_5VpG_q_5VpG_q_5VpG_q_5VpG_q_5VpG&s"},
      {id:19, category:"hogar", name:"Vela Aromática", price:8, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR07wJb2WpDqG4t62wJ4tS6D5U-lH6n_3kY3Q&s"},
      {id:20, category:"hogar", name:"Set de Tazas", price:18, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRz-4cQ_b7b_7c_3d3c8c_3d3c8c_3d3c8c_3d3c8c&s"},
      {id:21, category:"hogar", name:"Alfombra Moderna", price:65, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT7wJb2WpDqG4t62wJ4tS6D5U-lH6n_3kY3Q&s"},
      
      // Deportes y Fitness
      {id:22, category:"deportes", name:"Botella Térmica", price:18, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT0p-p_2q_2h_2P_2p_2p_2p_2p_2p_2p&s"},
      {id:23, category:"deportes", name:"Esterilla Yoga", price:22, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSSmJ0h_0B_0A4a_8P_0A4a_0A_8P_0A4a_0A&s"},
      {id:24, category:"deportes", name:"Bandas Elásticas", price:15, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ_p-z_wL_4zF6g_8n_9X_g8_5c_2p_g3p_6g&s"},
      {id:25, category:"deportes", name:"Gafas de Sol", price:28, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT7wJb2WpDqG4t62wJ4tS6D5U-lH6n_3kY3Q&s"},
      {id:26, category:"deportes", name:"Cuerda para Saltar", price:10, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR_x_2WpG_q_5Vp4E_lD_9q-7c-8k_7H_9G_7Q&s"}
    ];

    let users = {};
    let currentUser = null;

    const productList = document.getElementById("productList");

    function renderProducts(productsToRender) {
      productList.innerHTML = "";
      productsToRender.forEach(p => {
        const div = document.createElement("div");
        div.className = "product";
        div.innerHTML = `
          <img src="${p.img}" alt="${p.name}">
          <h4>${p.name}</h4>
          <p>$${p.price}</p>
          <button onclick="addToCart(${p.id})">Agregar al Carrito</button>
        `;
        productList.appendChild(div);
      });
    }

    function showProductsByCategory(category) {
      document.querySelectorAll('.category-menu button').forEach(btn => {
        btn.classList.remove('active');
      });
      const clickedButton = event.target;
      clickedButton.classList.add('active');

      if (category === 'all') {
        renderProducts(products);
      } else {
        const filteredProducts = products.filter(p => p.category === category);
        renderProducts(filteredProducts);
      }
    }

    // Carga inicial de todos los productos
    renderProducts(products);

    function getCart(){
      return currentUser && users[currentUser]?.cart ? users[currentUser].cart : [];
    }
    function saveCart(cart){
      if(currentUser){
        users[currentUser].cart = cart;
      }
    }

    function showSection(id){
      document.querySelectorAll("section").forEach(s=>s.style.display="none");
      document.getElementById(id).style.display="block";
      if(id==="cart") renderCart();
      if(id==="auth") updateAuthView();
      if(id==="history") renderHistory();
      if(id==="products") showProductsByCategory('all');
    }

    function addToCart(id){
      if(!currentUser){ alert("Debes iniciar sesión para agregar al carrito."); return; }
      let cart = getCart();
      const product = products.find(p=>p.id===id);
      const found = cart.find(item=>item.id===id);
      if(found){ found.qty++; } else { cart.push({...product, qty:1}); }
      saveCart(cart);
      updateCartCount();
    }

    function renderCart(){
      let cart = getCart();
      const cartItems = document.getElementById("cartItems");
      cartItems.innerHTML = "";
      let total = 0;
      cart.forEach(item=>{
        const subtotal = item.price * item.qty;
        total += subtotal;
        cartItems.innerHTML += `
          <tr>
            <td>${item.name}</td>
            <td>$${item.price}</td>
            <td>
              <button class="qtyBtn" onclick="changeQty(${item.id}, -1)">-</button>
              ${item.qty}
              <button class="qtyBtn" onclick="changeQty(${item.id}, 1)">+</button>
            </td>
            <td>$${subtotal}</td>
          </tr>`;
      });
      document.getElementById("cartTotal").textContent = total;
    }

    function changeQty(id, delta){
      let cart = getCart();
      const item = cart.find(p=>p.id===id);
      if(item){
        item.qty += delta;
        if(item.qty<=0) cart = cart.filter(p=>p.id!==id);
        saveCart(cart);
        renderCart();
        updateCartCount();
      }
    }

    function updateCartCount(){
      let cart = getCart();
      let count = cart.reduce((sum,p)=>sum+p.qty,0);
      document.getElementById("cartCount").textContent = count;
    }
    updateCartCount();

    function checkout(){
      let cart = getCart();
      if(cart.length===0){ alert("Tu carrito está vacío"); return; }
      showSection('checkout');
    }

    function togglePaymentFields(){
      const method = document.getElementById("paymentMethod").value;
      document.getElementById("cardFields").classList.add("hidden");
      document.getElementById("paypalFields").classList.add("hidden");
      if(method==="card") document.getElementById("cardFields").classList.remove("hidden");
      if(method==="paypal") document.getElementById("paypalFields").classList.remove("hidden");
    }

    document.getElementById("paymentForm").addEventListener("submit", function(e){
      e.preventDefault();
      const cart = getCart();
      const total = cart.reduce((sum,p)=>sum+(p.price*p.qty),0);
      const date = new Date().toLocaleString();
      if(currentUser){
        if(!users[currentUser].history) users[currentUser].history = [];
        users[currentUser].history.push({date, cart, total});
        saveCart([]); 
      }
      alert("✅ Pago realizado con éxito. ¡Gracias por tu compra!");
      updateCartCount();
      showSection('history');
    });

    function renderHistory(){
      const historyList = document.getElementById("historyList");
      historyList.innerHTML = "";
      if(!currentUser || !users[currentUser]?.history || users[currentUser].history.length===0){
        historyList.innerHTML = "<p>No tienes compras realizadas aún.</p>";
        return;
      }
      users[currentUser].history.forEach(order=>{
        historyList.innerHTML += `
          <div class="history-card">
            <h4>Compra del ${order.date}</h4>
            <ul>
              ${order.cart.map(item=>`<li>${item.qty} x ${item.name} - $${item.price*item.qty}</li>`).join("")}
            </ul>
            <strong>Total: $${order.total}</strong>
          </div>`;
      });
    }

    function register(){
      const user = document.getElementById("registerUser").value;
      const pass = document.getElementById("registerPass").value;
      if(users[user]){ alert("El usuario ya existe"); return; }
      users[user] = {password: pass, cart: [], history: []};
      alert("Cuenta creada. Ahora inicia sesión.");
    }

    function login(){
      const user = document.getElementById("loginUser").value;
      const pass = document.getElementById("loginPass").value;
      if(users[user] && users[user].password===pass){
        currentUser = user;
        updateAuthView();
        updateCartCount();
      } else { alert("Datos incorrectos"); }
    }

    function logout(){
      currentUser = null;
      updateAuthView();
      updateCartCount();
    }

    function updateAuthView(){
      if(currentUser){
        document.getElementById("authForms").classList.add("hidden");
        document.getElementById("welcome").classList.remove("hidden");
        document.getElementById("userName").textContent = currentUser;
      } else {
        document.getElementById("authForms").classList.remove("hidden");
        document.getElementById("welcome").classList.add("hidden");
      }
    }
  </script>
</body>
</html>